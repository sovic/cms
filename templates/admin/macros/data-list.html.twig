{% macro checkbox_all() %}
    <th class="w-10px pe-2 dt-orderable-none align-bottom" data-dt-column="0" aria-label="">
        <div class="form-check form-check-sm me-3 mb-0 p-0">
            <label>
                <input class="form-check-input m-0 data-list-check-all border-dark"
                       style="bottom: -4px; position: relative;"
                       type="checkbox"
                       autocomplete="off"
                       data-kt-check="true"
                       data-kt-check-target=".dataTable .form-check-input"
                       value="1">
            </label>
        </div>
    </th>
{% endmacro %}

{% macro checkbox(id) %}
    <div class="form-check form-check-sm mt-2 mb-0 p-0">
        <label>
            <input class="form-check-input m-0 data-list-check border-dark"
                   type="checkbox"
                   autocomplete="off"
                   value="{{ id }}">
        </label>
    </div>
{% endmacro %}

{% macro actions(actions, btn_class) %}
    {% if btn_class is not defined or btn_class is empty %}
        {% set btn_class = 'btn btn-sm btn-icon btn-light btn-flex btn-center btn-active-light-primary' %}
    {% endif %}
    {% if actions|length > 0 %}
        <a href="#"
           class="{{ btn_class }} ms-3"
           data-kt-menu-trigger="click"
           data-kt-menu-placement="bottom-end"
           data-bs-toggle="tooltip"
           data-bs-trigger="hover"
           aria-label="Další akce">
            <i class="bi bi-sliders"></i>
        </a>
        <div data-kt-menu="true"
             class="
            menu menu-sub menu-sub-dropdown menu-column menu-rounded
            menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-250px py-4
        ">
            {% for action in actions %}
                {% if action.is_separator is defined %}
                    <div class="separator my-3"></div>
                {% else %}
                    {% if action.model is not defined %}
                        {% set action = action|merge({'model': ''}) %}
                    {% endif %}
                    {% if action.method is not defined %}
                        {% set action = action|merge({'method': ''}) %}
                    {% endif %}
                    {% if action.parameters is not defined %}
                        {% set action = action|merge({'parameters': {}}) %}
                    {% endif %}
                    {% if action.class is not defined %}
                        {% set action = action|merge({'class': ''}) %}
                    {% endif %}
                    {% if action.confirm is not defined %}
                        {% set action = action|merge({'confirm': ''}) %}
                    {% endif %}

                    <div class="menu-item px-3">
                        <a href="{{ action.url }}"
                           class="menu-link px-3 text-end {% if action.method %}action-button{% endif %} {{ action.class }}"
                           data-model="{{ action.model }}"
                           data-method="{{ action.method }}"
                           data-confirm="{{ action.confirm }}"
                           data-parameters="{{ action.parameters|json_encode }}">
                            {{ action.title|raw }}
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}
{% endmacro %}

{% macro actions_icons(actions) %}
    {% if actions|length > 0 %}
        <div class="my-3 ms-9 text-end">
            {% for action in actions %}
                {% set icon = action.icon is defined ? action.icon : 'ki-duotone ki-pencil' %}
                {% if action.model is not defined %}
                    {% set action = action|merge({'model': ''}) %}
                {% endif %}
                {% if action.method is not defined %}
                    {% set action = action|merge({'method': ''}) %}
                {% endif %}
                {% if action.parameters is not defined %}
                    {% set action = action|merge({'parameters': {}}) %}
                {% endif %}
                {% if action.class is not defined %}
                    {% set action = action|merge({'class': ''}) %}
                {% endif %}
                {% if action.confirm is not defined %}
                    {% set action = action|merge({'confirm': ''}) %}
                {% endif %}
                {% if action.btn_class is not defined %}
                    {% set action = action|merge({'btn_class': 'btn-active-light-primary'}) %}
                {% endif %}

                <a href="{{ action.url }}"
                   class="btn btn-icon {{ action.btn_class }} w-30px h-30px {% if not loop.last %}me-3{% endif %}"
                   data-bs-toggle="tooltip"
                   data-bs-trigger="hover"
                   aria-label="{{ action.title }}"
                   data-bs-original-title="{{ action.title }}"
                   data-model="{{ action.model }}"
                   data-method="{{ action.method }}"
                   data-confirm="{{ action.confirm }}"
                   data-parameters="{{ action.parameters|json_encode }}"
                >
                    <i class="{{ icon }} fs-3">
                        <span class="path1"></span>
                        <span class="path2"></span>
                        <span class="path3"></span>
                        <span class="path4"></span>
                        <span class="path5"></span>
                    </i>
                </a>
            {% endfor %}
        </div>
    {% endif %}
{% endmacro %}

{% macro add_link(model, form, text, id = 0) %}
    <a class="edit-form-button"
       title="Upravit"
       data-model="{{ model }}"
       data-form="{{ form }}"
            {% if id %}
                data-id="{{ id }}"
            {% endif %}
       href="#">
        {{ text|raw }}
    </a>
{% endmacro %}

{% macro add_button(model, form, id = 0, title = '', icon_class = 'bi-pencil') %}
    <a class="btn btn-sm btn-flex btn-light-primary shadow-sm edit-form-button"
            {% if id > 0 %} title="Upravit" {% endif %}
       data-model="{{ model }}"
       data-form="{{ form }}"
            {% if id %}
                data-id="{{ id }}"
            {% endif %}
       href="#">
        <i class="bi {{ icon_class }} m-0 p-0 {% if title %}me-3{% else %}fs-5{% endif %}"></i>
        {% if title %}
            {{ title }}
        {% endif %}
    </a>
{% endmacro %}

{% macro action_button(title, model, id, method, parameters = {}, btn_class = 'btn-light-primary', icon_class = 'bi-pencil', confirm = '', show_title = false) %}
    <a href="#"
       title="{{ title }}"
       data-model="{{ model }}"
       data-method="{{ model }}/{{ id }}/{{ method }}"
       data-confirm="{{ confirm }}"
       data-parameters="{{ parameters|json_encode }}"
       class="btn btn-sm {{ btn_class }} text-center action-button">
        <i class="bi m-0 mb-1 p-0 fs-6 {{ icon_class }}">
            <span class="path1"></span>
            <span class="path2"></span>
        </i>
        {% if show_title %} {{ title }}{% endif %}
    </a>
{% endmacro %}

{% macro sortable_column(id, index, label, class, sort_options, query) %}
    <th data-dt-column="{{ index }}">
        {{- _self.sortable_column_div(id, label, class, sort_options, query) -}}
    </th>
{% endmacro %}

{% macro sortable_column_div(id, label, class, sort_options, query) %}
    <div class="
        text-start {{ class }} align-bottom
        {% if id in sort_options %}dt-orderable-asc dt-orderable-desc{% endif %}
        {% if id == query.sort and query.order == 'asc' %}dt-ordering-asc{% endif %}
        {% if id == query.sort and query.order == 'desc' %}dt-ordering-desc{% endif %}
        "
         {% if id == query.sort and query.order == 'asc' %}aria-sort="ascending"{% endif %}
            {% if id == query.sort and query.order == 'desc' %}aria-sort="descending"{% endif %}
         data-sort="{{ id }}">
        <span class="dt-column-title" role="button">
            {{- label|raw }} {% if id != query.sort or not query.order %}<i class="bi bi-filter"></i>{% endif -%}
        </span>
    </div>
{% endmacro %}

{% macro empty_set(text) %}
    <p class="my-5 text-muted h6 fw-normal">
        {{- text -}}
    </p>
{% endmacro %}

{% macro list_header_search(search) %}
    <div class="d-flex align-items-center position-relative my-1">
        <div class="d-flex align-items-center me-1">
            <i class="ki-outline ki-magnifier fs-3 position-absolute ms-4"></i>
            <label>
                <input type="text"
                       name="search"
                       value="{{ search }}"
                       class="form-control form-control-solid w-250px ps-12"
                       placeholder="Hledat">
            </label>
        </div>
    </div>
{% endmacro %}

{% macro list_header_filters(filters = '', visibility = 'public') %}
    <button type="button" class="btn btn-light-primary show menu-dropdown"
            data-kt-menu-trigger="click"
            data-kt-menu-placement="bottom-end">
        <i class="ki-duotone ki-filter fs-2 pe-0 pe-md-2">
            <span class="path1"></span><span class="path2"></span>
        </i>
        <span class="d-none d-md-inline-block">Filtrovat</span>
    </button>
    <div class="menu menu-sub menu-sub-dropdown w-300px w-md-325px"
         data-kt-menu="true"
         data-popper-placement="bottom-end">

        <div class="px-7 pt-7 pb-0">
            <div class="fs-5 text-gray-900 fw-bold">Filtrovat</div>
        </div>

        {{ filters|raw }}

        <div class="px-7 pb-7 pt-3">
            <div class="d-flex justify-content-end">
                <button type="reset" class="btn btn-light btn-sm btn-active-light-primary">Zrušit výběr</button>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro list_filter_enum_select(label, id, items, selected_value = '') %}
    <div class="px-7 py-2 w-100">
        <label for="{{ id }}" class="form-label fs-6 fw-semibold w-100">
            <select id="{{ id }}"
                    name="{{ id }}"
                    autocomplete="off"
                    class="form-control form-control-solid w-100">
                <option value="">{{ label }}</option>
                {% for item in items %}
                    <option value="{{ item.value }}"
                            {% if item.value == selected_value %} selected="selected"{% endif %}>
                        {{ item.trans }}
                    </option>
                {% endfor %}
            </select>
        </label>
    </div>
{% endmacro %}

{% macro list_filter_id_name_select(label, id, items, selected_value = '') %}
    <div class="px-7 py-2 w-100">
        <label for="{{ id }}" class="form-label fs-6 fw-semibold w-100">
            <select id="{{ id }}"
                    name="{{ id }}"
                    autocomplete="off"
                    class="form-control form-control-solid w-100">
                <option value="">{{ label }}</option>
                {% for item in items %}
                    <option value="{{ item.id }}"
                            {% if item.id == selected_value %} selected="selected"{% endif %}>
                        {{ item.name }}
                    </option>
                {% endfor %}
            </select>
        </label>
    </div>
{% endmacro %}

{% macro list_filter_inactive(visibility) %}
    <div class="px-7 py-2">
        <div class="form-group">
            <div class="form-check">
                <input type="checkbox"
                       id="show_inactive"
                       name="show_inactive"
                       class="form-check-input"
                       value="{{ visibility == 'all' ? '1' : '0' }}"
                        {% if visibility == 'all' %} checked="checked"{% endif %}>
                <label class="form-check-label" for="show_inactive">
                    Všechny záznamy (vč. smazaných)
                </label>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro group_action_button(method, label, tooltip = '', confirm = false, parameters = {}) %}
    <a href="#"
       class="link-underline badge badge-light-primary group-action"
            {% if confirm %}
                data-confirm="Opravdu chcete provést tuto akci?"
            {% endif %}
            {% if tooltip %}
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{ tooltip|raw }}"
            {% endif %}
       data-parameters="{{ parameters|json_encode }}"
       data-method="{{ method }}">
        {{ label }}
    </a>
{% endmacro %}

{% macro list_footer(pagination, query) %}
    <div class="row">
        <div class="col-5 d-flex align-items-start justify-content-start dt-toolbar">
            <div>
                {% include '@CmsBundle/admin/partials/data-list-limit.html.twig' %}
            </div>
        </div>
        <div class="col-7 d-flex align-items-end justify-content-end justify-content-md-end">
            {% include '@CmsBundle/admin/partials/pagination.html.twig' %}
        </div>
    </div>
    {% if pagination is defined and pagination is not empty and pagination.total != null %}
        <div class="row mt-3">
            <div class="col-12">
                <p>Celkem nalezeno záznamů: {{ pagination.total }}</p>
            </div>
        </div>
    {% endif %}
{% endmacro %}
